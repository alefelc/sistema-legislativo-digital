#comunicacion-oficial-show
  %h4= t('comunicacion_oficials.show.info')
  %hr
  #comunicacion-oficial-body
    - com = @comunicacion_oficial
    %p
      %span.titles= "Nro.: "
      %span= com.id
      %span
        &nbsp 
        %i.btn.btn-xs.btn-default.fa.fa-download{ title: "Descargar Comunicación Oficial"}
    - fojas = com.get_fojas
      - if fojas.present?      
      %p.single-tab
        %span= "Nro. de Fojas: "
        %span= fojas
    - asunto = com.get_asunto
      - if asunto.present?
      %p.single-tab
        %span.titles= "Asunto: "
        %span= asunto    
    - iniciadores_organos = get_iniciadores_organos(com)
    - iniciadores_areas = get_iniciadores_areas(com)
    - iniciadores_reparticiones = get_iniciadores_reparticiones(com)
    - iniciadores_dependencias = get_iniciadores_dependencias(com)
    - iniciadores_bloques = get_iniciadores_bloques(com)
    - iniciadores_comisions = get_iniciadores_comisions(com)
    - iniciadores_personas = get_iniciadores_personas(com)
    %p.single-tab
      .single-tab.titles= "Iniciadores: "
      - if iniciadores_organos.present?  
        .double-tab.titles= "Organos de Gobierno: "
        - iniciadores_organos.each do |o|
          .double-tab= o[:denominacion].to_s
      - if iniciadores_areas.present?
        .double-tab.titles= "Areas: "
        - iniciadores_areas.each do |a|
          .double-tab= a[:denominacion].to_s  
      - if iniciadores_bloques.present?
        .double-tab.titles= "Bloques: "
        - iniciadores_bloques.each do |b|
          .double-tab= b[:denominacion].to_s
      - if iniciadores_comisions.present?  
        .double-tab.titles= "Comisiones: "
        - iniciadores_comisions.each do |b|
          .double-tab= b[:denominacion].to_s
      - if iniciadores_reparticiones.present?  
        .double-tab.titles= "Reparticiones Oficiales: "
        - iniciadores_reparticiones.each do |r|
          .double-tab= r[:denominacion].to_s
      - if iniciadores_dependencias.present?  
        .double-tab.titles= "Dependencias Municipales: "
        - iniciadores_dependencias.each do |d|
          .double-tab= d[:denominacion].to_s  
      - if iniciadores_personas.present?  
        .double-tab.titles= "Personas: "
        - iniciadores_personas.each do |b|
          .double-tab= b[:type] + ": " + b[:apellido].to_s + ", " + b[:nombre].to_s
    - actualizado = com.get_date_time
      - if actualizado.present?
      %p.single-tab
        %span= "Creado/Actualizado: "
        %span= to_date_time(actualizado)
    - obs = com.get_observaciones
      - if obs.present?
      %p.single-tab
        %span= "Observaciones: "
        %span= obs
    %p.single-tab
      .single-tab.titles= "Estados del trámite: "
      .single-tab  
        %table.table.table-striped.table-bordered#states-table-show
          %thead
            %tr
              %th{style: "text-align:center;"}= "Estado"
              %th= "Fecha"
          %tbody
            - com.estado_tramites.each do |x|
              - case x.tipo
              - when "1"
                %tr{ class: 'derivacion-tr-show', 'data-id': x.id, 'data-tipo': x.tipo}
                  %td= "Iniciado"
                  %td= to_date_time(x.created_at)  
              - when "2"
                - if (x.ref_type == 'Personal')
                  - text = x.ref.apellido + ", " + x.ref.nombre;
                - else
                  - text = x.ref.denominacion;   
                %tr{ class: 'derivacion-tr-show', 'data-id': x.id, 'data-tipo': x.tipo, 'data-idref': x.ref_id, 'data-typeref': x.ref_type }
                  %td= "Derivado a " + x.ref_type + ": " + text
                  %td= to_date_time(x.created_at)
              - when "3"
                %tr{ class: 'derivacion-tr-show', 'data-id': x.id, 'data-tipo': x.tipo}
                  %td= "Concluido en... " 
                  %td= to_date_time(x.created_at)
              - else    